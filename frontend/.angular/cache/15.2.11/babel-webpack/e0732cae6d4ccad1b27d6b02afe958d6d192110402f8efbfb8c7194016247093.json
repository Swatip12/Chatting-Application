{"ast":null,"code":"import { MessageType } from '../../models/message.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"../../services/chat.service\";\nimport * as i3 from \"../../services/group.service\";\nimport * as i4 from \"../../services/notification.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"../message/message.component\";\nimport * as i9 from \"../user-list/user-list.component\";\nimport * as i10 from \"../group-create/group-create.component\";\nimport * as i11 from \"../group-list/group-list.component\";\nconst _c0 = [\"messageArea\"];\nfunction ChatRoomComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"app-user-list\", 25);\n    i0.ɵɵlistener(\"userSelected\", function ChatRoomComponent_div_26_Template_app_user_list_userSelected_1_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.onUserSelected($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"users\", ctx_r0.users)(\"selectedUser\", ctx_r0.selectedUser)(\"currentUser\", ctx_r0.currentUser);\n  }\n}\nfunction ChatRoomComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"app-group-list\", 26);\n    i0.ɵɵlistener(\"groupSelected\", function ChatRoomComponent_div_27_Template_app_group_list_groupSelected_1_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onGroupSelected($event));\n    })(\"createGroupClicked\", function ChatRoomComponent_div_27_Template_app_group_list_createGroupClicked_1_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onCreateGroupClick());\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"showMyGroups\", true)(\"showAllGroups\", false);\n  }\n}\nfunction ChatRoomComponent_div_29_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42)(1, \"div\", 43);\n    i0.ɵɵtext(2);\n    i0.ɵɵelement(3, \"div\", 44);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"online\", ctx_r12.isOnline(ctx_r12.selectedUser));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.selectedUser.username.charAt(0).toUpperCase(), \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"online\", ctx_r12.isOnline(ctx_r12.selectedUser));\n  }\n}\nfunction ChatRoomComponent_div_29_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"div\", 46);\n    i0.ɵɵelement(2, \"i\", 47);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatRoomComponent_div_29_i_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 48);\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"text-success\", ctx_r14.isOnline(ctx_r14.selectedUser))(\"text-secondary\", !ctx_r14.isOnline(ctx_r14.selectedUser));\n  }\n}\nfunction ChatRoomComponent_div_29_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r15.isOnline(ctx_r15.selectedUser) ? \"Online\" : \"Offline\");\n  }\n}\nfunction ChatRoomComponent_div_29_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"i\", 49);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r16.selectedGroup.memberCount, \" member\", ctx_r16.selectedGroup.memberCount !== 1 ? \"s\" : \"\", \" \");\n  }\n}\nfunction ChatRoomComponent_div_29_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 50);\n    i0.ɵɵelement(1, \"i\", 51);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ChatRoomComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\", 28)(2, \"div\", 29);\n    i0.ɵɵtemplate(3, ChatRoomComponent_div_29_div_3_Template, 4, 5, \"div\", 30);\n    i0.ɵɵtemplate(4, ChatRoomComponent_div_29_div_4_Template, 3, 0, \"div\", 31);\n    i0.ɵɵelementStart(5, \"div\")(6, \"h6\", 32);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"small\", 33);\n    i0.ɵɵtemplate(9, ChatRoomComponent_div_29_i_9_Template, 1, 4, \"i\", 34);\n    i0.ɵɵtemplate(10, ChatRoomComponent_div_29_span_10_Template, 2, 1, \"span\", 35);\n    i0.ɵɵtemplate(11, ChatRoomComponent_div_29_span_11_Template, 3, 2, \"span\", 35);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"div\", 36)(13, \"button\", 37);\n    i0.ɵɵelement(14, \"i\", 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, ChatRoomComponent_div_29_button_15_Template, 2, 0, \"button\", 39);\n    i0.ɵɵelementStart(16, \"button\", 40);\n    i0.ɵɵelement(17, \"i\", 41);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedUser);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedGroup);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.getCurrentConversationName());\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedUser);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedUser);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedGroup);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedGroup);\n  }\n}\nfunction ChatRoomComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52)(1, \"div\", 53);\n    i0.ɵɵelement(2, \"i\", 54);\n    i0.ɵɵelementStart(3, \"h3\");\n    i0.ɵɵtext(4, \"Welcome to Real-Time Chat!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 55);\n    i0.ɵɵtext(6, \"Select a user or group from the sidebar to start chatting\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 56)(8, \"div\", 57);\n    i0.ɵɵelement(9, \"i\");\n    i0.ɵɵelementStart(10, \"span\", 58);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵclassMap(ctx_r3.connectionStatus ? \"fas fa-wifi text-success\" : \"fas fa-wifi-slash text-danger\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r3.getConnectionStatusClass());\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.getConnectionStatusText(), \" \");\n  }\n}\nfunction ChatRoomComponent_div_31_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 64)(1, \"div\", 65)(2, \"span\", 66);\n    i0.ɵɵtext(3, \"Loading messages...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 67);\n    i0.ɵɵtext(5, \"Loading conversation...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatRoomComponent_div_31_div_3_app_message_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-message\", 71);\n  }\n  if (rf & 2) {\n    const message_r24 = ctx.$implicit;\n    const ctx_r22 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"message\", message_r24)(\"currentUser\", ctx_r22.currentUser)(\"isGroupChat\", ctx_r22.isGroupConversation());\n  }\n}\nfunction ChatRoomComponent_div_31_div_3_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 72)(1, \"div\", 53);\n    i0.ɵɵelement(2, \"i\", 73);\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"No messages yet. Start the conversation!\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ChatRoomComponent_div_31_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 68);\n    i0.ɵɵtemplate(1, ChatRoomComponent_div_31_div_3_app_message_1_Template, 1, 3, \"app-message\", 69);\n    i0.ɵɵtemplate(2, ChatRoomComponent_div_31_div_3_div_2_Template, 5, 0, \"div\", 70);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r20.messages)(\"ngForTrackBy\", ctx_r20.trackByMessageId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r20.messages.length === 0);\n  }\n}\nfunction ChatRoomComponent_div_31_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 74)(1, \"div\", 75);\n    i0.ɵɵelement(2, \"span\")(3, \"span\")(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"small\", 76);\n    i0.ɵɵtext(6, \"You are typing...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatRoomComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 59, 60);\n    i0.ɵɵtemplate(2, ChatRoomComponent_div_31_div_2_Template, 6, 0, \"div\", 61);\n    i0.ɵɵtemplate(3, ChatRoomComponent_div_31_div_3_Template, 3, 3, \"div\", 62);\n    i0.ɵɵtemplate(4, ChatRoomComponent_div_31_div_4_Template, 7, 0, \"div\", 63);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isTyping);\n  }\n}\nfunction ChatRoomComponent_div_32_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 83)(1, \"small\", 33);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r25.newMessage.length, \"/1000\");\n  }\n}\nfunction ChatRoomComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 77)(1, \"div\", 78)(2, \"input\", 79);\n    i0.ɵɵlistener(\"ngModelChange\", function ChatRoomComponent_div_32_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.newMessage = $event);\n    })(\"input\", function ChatRoomComponent_div_32_Template_input_input_2_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.onMessageInput());\n    })(\"keypress\", function ChatRoomComponent_div_32_Template_input_keypress_2_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.onKeyPress($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 80);\n    i0.ɵɵlistener(\"click\", function ChatRoomComponent_div_32_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r30.sendMessage());\n    });\n    i0.ɵɵelement(4, \"i\", 81);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, ChatRoomComponent_div_32_div_5_Template, 3, 1, \"div\", 82);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.newMessage)(\"placeholder\", ctx_r5.selectedGroup ? \"Type a message to \" + ctx_r5.selectedGroup.name + \"...\" : \"Type your message...\")(\"disabled\", !ctx_r5.canSendMessage() || !ctx_r5.connectionStatus);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r5.newMessage.trim() || !ctx_r5.canSendMessage() || !ctx_r5.connectionStatus);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.newMessage.length > 800);\n  }\n}\nfunction ChatRoomComponent_app_group_create_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-group-create\", 84);\n    i0.ɵɵlistener(\"groupCreated\", function ChatRoomComponent_app_group_create_33_Template_app_group_create_groupCreated_0_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.onGroupCreated($event));\n    })(\"cancelled\", function ChatRoomComponent_app_group_create_33_Template_app_group_create_cancelled_0_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r33.onGroupCreateCancelled());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nexport class ChatRoomComponent {\n  constructor(authService, chatService, groupService, notificationService, router) {\n    this.authService = authService;\n    this.chatService = chatService;\n    this.groupService = groupService;\n    this.notificationService = notificationService;\n    this.router = router;\n    this.currentUser = null;\n    this.users = [];\n    this.groups = [];\n    this.messages = [];\n    this.newMessage = '';\n    this.selectedUser = null;\n    this.selectedGroup = null;\n    this.loading = false;\n    this.connectionStatus = false;\n    this.isTyping = false;\n    // UI state\n    this.activeTab = 'users';\n    this.showGroupCreate = false;\n    this.subscriptions = [];\n    this.shouldScrollToBottom = false;\n  }\n  ngOnInit() {\n    this.currentUser = this.authService.getCurrentUser();\n    if (!this.currentUser) {\n      this.router.navigate(['/login']);\n      return;\n    }\n    this.initializeChat();\n  }\n  ngOnDestroy() {\n    this.subscriptions.forEach(sub => sub.unsubscribe());\n    this.chatService.disconnect();\n  }\n  ngAfterViewChecked() {\n    if (this.shouldScrollToBottom) {\n      this.scrollToBottom();\n      this.shouldScrollToBottom = false;\n    }\n  }\n  initializeChat() {\n    // Connect to WebSocket\n    this.chatService.connect();\n    // Subscribe to messages\n    const messagesSub = this.chatService.subscribeToMessages().subscribe({\n      next: message => {\n        // Only add messages for current conversation or system messages\n        if (this.isMessageForCurrentConversation(message)) {\n          this.messages.push(message);\n          this.shouldScrollToBottom = true;\n        }\n      },\n      error: error => {\n        console.error('Error receiving message:', error);\n      }\n    });\n    // Subscribe to user status updates\n    const userStatusSub = this.chatService.subscribeToUserStatus().subscribe({\n      next: users => {\n        this.users = users.filter(user => user.id !== this.currentUser?.id);\n      },\n      error: error => {\n        console.error('Error receiving user status:', error);\n      }\n    });\n    // Subscribe to connection status\n    const connectionSub = this.chatService.getConnectionStatus().subscribe({\n      next: status => {\n        this.connectionStatus = status;\n        if (status) {\n          this.notificationService.showSuccess('Connected to chat server');\n        } else {\n          this.notificationService.showWarning('Disconnected from chat server');\n        }\n      }\n    });\n    // Subscribe to message status updates\n    const messageStatusSub = this.chatService.getMessageStatus().subscribe({\n      next: statusUpdate => {\n        // Handle message delivery status updates\n        console.log('Message status update:', statusUpdate);\n      }\n    });\n    this.subscriptions.push(messagesSub, userStatusSub, connectionSub, messageStatusSub);\n    // Load initial data\n    this.loadUsers();\n    this.loadGroups();\n  }\n  loadUsers() {\n    this.authService.getUsers().subscribe({\n      next: users => {\n        this.users = users.filter(user => user.id !== this.currentUser?.id);\n      },\n      error: error => {\n        console.error('Error loading users:', error);\n      }\n    });\n  }\n  loadGroups() {\n    this.groupService.getUserGroups().subscribe({\n      next: groups => {\n        this.groups = groups;\n      },\n      error: error => {\n        console.error('Error loading groups:', error);\n      }\n    });\n  }\n  onUserSelected(user) {\n    this.selectedUser = user;\n    this.selectedGroup = null; // Clear group selection\n    this.loadMessageHistory(user.id);\n  }\n  onGroupSelected(group) {\n    this.selectedGroup = group;\n    this.selectedUser = null; // Clear user selection\n    this.loadGroupMessageHistory(group.id);\n    // Subscribe to group messages\n    this.chatService.subscribeToGroup(group.id);\n  }\n  loadMessageHistory(userId) {\n    this.loading = true;\n    this.messages = []; // Clear current messages\n    this.authService.getMessageHistory(userId).subscribe({\n      next: messages => {\n        this.messages = messages;\n        this.loading = false;\n        this.shouldScrollToBottom = true;\n      },\n      error: error => {\n        console.error('Error loading message history:', error);\n        this.loading = false;\n      }\n    });\n  }\n  loadGroupMessageHistory(groupId) {\n    this.loading = true;\n    this.messages = []; // Clear current messages\n    this.authService.getGroupMessageHistory(groupId).subscribe({\n      next: messages => {\n        this.messages = messages;\n        this.loading = false;\n        this.shouldScrollToBottom = true;\n      },\n      error: error => {\n        console.error('Error loading group message history:', error);\n        this.loading = false;\n      }\n    });\n  }\n  sendMessage() {\n    if (this.newMessage.trim() && this.currentUser && this.connectionStatus) {\n      const message = {\n        sender: this.currentUser,\n        content: this.newMessage.trim(),\n        type: MessageType.CHAT,\n        timestamp: new Date()\n      };\n      try {\n        if (this.selectedGroup) {\n          // Send group message\n          message.groupId = this.selectedGroup.id;\n          this.chatService.sendGroupMessage(message, this.selectedGroup.id);\n        } else if (this.selectedUser) {\n          // Send private message\n          message.receiver = this.selectedUser;\n          this.chatService.sendMessage(message);\n        }\n        this.newMessage = '';\n        this.shouldScrollToBottom = true;\n      } catch (error) {\n        console.error('Error sending message:', error);\n        this.notificationService.showError('Failed to send message. Please try again.');\n      }\n    } else if (!this.connectionStatus) {\n      this.notificationService.showWarning('Cannot send message: Not connected to chat server');\n    } else if (!this.newMessage.trim()) {\n      this.notificationService.showWarning('Please enter a message');\n    }\n  }\n  onKeyPress(event) {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      this.sendMessage();\n    }\n  }\n  scrollToBottom() {\n    try {\n      if (this.messageArea) {\n        this.messageArea.nativeElement.scrollTop = this.messageArea.nativeElement.scrollHeight;\n      }\n    } catch (err) {\n      console.error('Error scrolling to bottom:', err);\n    }\n  }\n  logout() {\n    // Disconnect from chat service first\n    this.chatService.disconnect();\n    // Update user status to offline and logout\n    if (this.currentUser) {\n      this.authService.updateUserStatus('OFFLINE').subscribe({\n        next: () => {\n          this.authService.logout();\n          this.router.navigate(['/login']);\n        },\n        error: () => {\n          // Logout even if status update fails\n          this.authService.logout();\n          this.router.navigate(['/login']);\n        }\n      });\n    } else {\n      this.authService.logout();\n      this.router.navigate(['/login']);\n    }\n  }\n  isOnline(user) {\n    return user.status === 'ONLINE';\n  }\n  getStatusClass(user) {\n    return this.isOnline(user) ? 'user-status-online' : 'user-status-offline';\n  }\n  isMessageForCurrentConversation(message) {\n    // System messages (JOIN/LEAVE) should be shown based on context\n    if (message.type === MessageType.JOIN || message.type === MessageType.LEAVE) {\n      // Show system messages for the current group or general chat\n      if (this.selectedGroup && message.groupId === this.selectedGroup.id) {\n        return true;\n      }\n      // Show general system messages when in private chat\n      if (this.selectedUser && !message.groupId) {\n        return true;\n      }\n      return false;\n    }\n    // Group messages\n    if (message.groupId) {\n      return this.selectedGroup?.id === message.groupId;\n    }\n    // Private messages\n    if (!this.selectedUser || !this.currentUser) {\n      return false;\n    }\n    // Show messages between current user and selected user\n    return message.sender.id === this.currentUser.id && message.receiver?.id === this.selectedUser.id || message.sender.id === this.selectedUser.id && message.receiver?.id === this.currentUser.id;\n  }\n  onMessageInput() {\n    // Handle typing indicators here if needed\n    this.isTyping = this.newMessage.trim().length > 0;\n  }\n  getConnectionStatusText() {\n    return this.connectionStatus ? 'Connected' : 'Disconnected';\n  }\n  getConnectionStatusClass() {\n    return this.connectionStatus ? 'text-success' : 'text-danger';\n  }\n  trackByMessageId(index, message) {\n    return message.id || `${message.sender.id}-${message.timestamp.getTime()}`;\n  }\n  // Group functionality methods\n  switchToUsersTab() {\n    this.activeTab = 'users';\n    this.selectedGroup = null;\n  }\n  switchToGroupsTab() {\n    this.activeTab = 'groups';\n    this.selectedUser = null;\n  }\n  onCreateGroupClick() {\n    this.showGroupCreate = true;\n  }\n  onGroupCreated(group) {\n    this.showGroupCreate = false;\n    this.groups.push(group);\n    this.onGroupSelected(group);\n  }\n  onGroupCreateCancelled() {\n    this.showGroupCreate = false;\n  }\n  getCurrentConversationName() {\n    if (this.selectedGroup) {\n      return this.selectedGroup.name;\n    }\n    if (this.selectedUser) {\n      return this.selectedUser.username;\n    }\n    return 'Select a conversation';\n  }\n  isGroupConversation() {\n    return !!this.selectedGroup;\n  }\n  canSendMessage() {\n    return !!(this.selectedUser || this.selectedGroup);\n  }\n  static {\n    this.ɵfac = function ChatRoomComponent_Factory(t) {\n      return new (t || ChatRoomComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ChatService), i0.ɵɵdirectiveInject(i3.GroupService), i0.ɵɵdirectiveInject(i4.NotificationService), i0.ɵɵdirectiveInject(i5.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ChatRoomComponent,\n      selectors: [[\"app-chat-room\"]],\n      viewQuery: function ChatRoomComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.messageArea = _t.first);\n        }\n      },\n      decls: 34,\n      vars: 17,\n      consts: [[1, \"container-fluid\", \"chat-container\"], [1, \"navbar\", \"navbar-expand-lg\", \"navbar-dark\", \"bg-primary\"], [1, \"container-fluid\"], [\"href\", \"#\", 1, \"navbar-brand\"], [1, \"fas\", \"fa-comments\", \"me-2\"], [1, \"navbar-nav\", \"ms-auto\", \"d-flex\", \"align-items-center\"], [1, \"connection-indicator\", \"me-3\"], [1, \"navbar-text\", \"me-3\"], [1, \"fas\", \"fa-user\", \"me-1\"], [1, \"btn\", \"btn-outline-light\", \"btn-sm\", 3, \"click\"], [1, \"fas\", \"fa-sign-out-alt\", \"me-1\"], [1, \"row\", \"g-0\", \"main-content\"], [1, \"col-md-3\", \"sidebar\"], [1, \"sidebar-tabs\"], [1, \"tab-button\", 3, \"click\"], [1, \"fas\", \"fa-user\", \"me-2\"], [1, \"fas\", \"fa-users\", \"me-2\"], [\"class\", \"tab-content\", 4, \"ngIf\"], [1, \"col-md-9\", \"chat-area\"], [\"class\", \"chat-header\", 4, \"ngIf\"], [\"class\", \"welcome-area\", 4, \"ngIf\"], [\"class\", \"message-area\", 4, \"ngIf\"], [\"class\", \"message-input\", 4, \"ngIf\"], [3, \"groupCreated\", \"cancelled\", 4, \"ngIf\"], [1, \"tab-content\"], [3, \"users\", \"selectedUser\", \"currentUser\", \"userSelected\"], [3, \"showMyGroups\", \"showAllGroups\", \"groupSelected\", \"createGroupClicked\"], [1, \"chat-header\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-between\"], [1, \"d-flex\", \"align-items-center\"], [\"class\", \"user-avatar me-3\", 4, \"ngIf\"], [\"class\", \"group-avatar me-3\", 4, \"ngIf\"], [1, \"mb-0\"], [1, \"text-muted\"], [\"class\", \"fas fa-circle me-1\", 3, \"text-success\", \"text-secondary\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"chat-actions\"], [\"title\", \"Refresh messages\", 1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", \"me-2\"], [1, \"fas\", \"fa-sync-alt\"], [\"class\", \"btn btn-sm btn-outline-secondary me-2\", \"title\", \"Group info\", 4, \"ngIf\"], [\"title\", \"Clear chat\", 1, \"btn\", \"btn-sm\", \"btn-outline-secondary\"], [1, \"fas\", \"fa-trash\"], [1, \"user-avatar\", \"me-3\"], [1, \"avatar-circle\"], [1, \"status-indicator\"], [1, \"group-avatar\", \"me-3\"], [1, \"avatar-circle\", \"group\"], [1, \"fas\", \"fa-users\"], [1, \"fas\", \"fa-circle\", \"me-1\"], [1, \"fas\", \"fa-users\", \"me-1\"], [\"title\", \"Group info\", 1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", \"me-2\"], [1, \"fas\", \"fa-info-circle\"], [1, \"welcome-area\"], [1, \"text-center\", \"text-muted\"], [1, \"fas\", \"fa-comments\", \"fa-4x\", \"mb-4\", \"text-primary\"], [1, \"lead\"], [1, \"mt-4\"], [1, \"d-flex\", \"justify-content-center\", \"align-items-center\"], [1, \"ms-2\"], [1, \"message-area\"], [\"messageArea\", \"\"], [\"class\", \"loading-state\", 4, \"ngIf\"], [\"class\", \"messages-container\", 4, \"ngIf\"], [\"class\", \"typing-indicator\", 4, \"ngIf\"], [1, \"loading-state\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"mt-2\", \"text-muted\"], [1, \"messages-container\"], [3, \"message\", \"currentUser\", \"isGroupChat\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"class\", \"empty-messages\", 4, \"ngIf\"], [3, \"message\", \"currentUser\", \"isGroupChat\"], [1, \"empty-messages\"], [1, \"fas\", \"fa-comment-dots\", \"fa-2x\", \"mb-3\"], [1, \"typing-indicator\"], [1, \"typing-dots\"], [1, \"text-muted\", \"ms-2\"], [1, \"message-input\"], [1, \"input-group\"], [\"type\", \"text\", \"maxlength\", \"1000\", 1, \"form-control\", 3, \"ngModel\", \"placeholder\", \"disabled\", \"ngModelChange\", \"input\", \"keypress\"], [\"type\", \"button\", \"title\", \"Send message\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"fas\", \"fa-paper-plane\"], [\"class\", \"character-counter\", 4, \"ngIf\"], [1, \"character-counter\"], [3, \"groupCreated\", \"cancelled\"]],\n      template: function ChatRoomComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"nav\", 1)(2, \"div\", 2)(3, \"a\", 3);\n          i0.ɵɵelement(4, \"i\", 4);\n          i0.ɵɵtext(5, \" Real-Time Chat \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6);\n          i0.ɵɵelement(8, \"i\");\n          i0.ɵɵelementStart(9, \"small\");\n          i0.ɵɵtext(10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"span\", 7);\n          i0.ɵɵelement(12, \"i\", 8);\n          i0.ɵɵtext(13);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function ChatRoomComponent_Template_button_click_14_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵelement(15, \"i\", 10);\n          i0.ɵɵtext(16, \"Logout \");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(17, \"div\", 11)(18, \"div\", 12)(19, \"div\", 13)(20, \"button\", 14);\n          i0.ɵɵlistener(\"click\", function ChatRoomComponent_Template_button_click_20_listener() {\n            return ctx.switchToUsersTab();\n          });\n          i0.ɵɵelement(21, \"i\", 15);\n          i0.ɵɵtext(22, \"Users \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"button\", 14);\n          i0.ɵɵlistener(\"click\", function ChatRoomComponent_Template_button_click_23_listener() {\n            return ctx.switchToGroupsTab();\n          });\n          i0.ɵɵelement(24, \"i\", 16);\n          i0.ɵɵtext(25, \"Groups \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(26, ChatRoomComponent_div_26_Template, 2, 3, \"div\", 17);\n          i0.ɵɵtemplate(27, ChatRoomComponent_div_27_Template, 2, 2, \"div\", 17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"div\", 18);\n          i0.ɵɵtemplate(29, ChatRoomComponent_div_29_Template, 18, 7, \"div\", 19);\n          i0.ɵɵtemplate(30, ChatRoomComponent_div_30_Template, 12, 5, \"div\", 20);\n          i0.ɵɵtemplate(31, ChatRoomComponent_div_31_Template, 5, 3, \"div\", 21);\n          i0.ɵɵtemplate(32, ChatRoomComponent_div_32_Template, 6, 5, \"div\", 22);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(33, ChatRoomComponent_app_group_create_33_Template, 1, 0, \"app-group-create\", 23);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(8);\n          i0.ɵɵclassMap(ctx.connectionStatus ? \"fas fa-circle text-success\" : \"fas fa-circle text-danger\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵclassMap(ctx.getConnectionStatusClass());\n          i0.ɵɵadvance(1);\n          i0.ɵɵtextInterpolate(ctx.getConnectionStatusText());\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\" Welcome, \", ctx.currentUser == null ? null : ctx.currentUser.username, \"! \");\n          i0.ɵɵadvance(7);\n          i0.ɵɵclassProp(\"active\", ctx.activeTab === \"users\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵclassProp(\"active\", ctx.activeTab === \"groups\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"users\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"groups\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedUser || ctx.selectedGroup);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.selectedUser && !ctx.selectedGroup);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedUser || ctx.selectedGroup);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.canSendMessage());\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.showGroupCreate);\n        }\n      },\n      dependencies: [i6.NgForOf, i6.NgIf, i7.DefaultValueAccessor, i7.NgControlStatus, i7.MaxLengthValidator, i7.NgModel, i8.MessageComponent, i9.UserListComponent, i10.GroupCreateComponent, i11.GroupListComponent],\n      styles: [\".chat-container[_ngcontent-%COMP%] {\\r\\n  height: 100vh;\\r\\n  overflow: hidden;\\r\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.chat-container[_ngcontent-%COMP%]::before {\\r\\n  content: '';\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n  right: 0;\\r\\n  bottom: 0;\\r\\n  background: url('data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 100 100\\\"><defs><pattern id=\\\"grain\\\" width=\\\"100\\\" height=\\\"100\\\" patternUnits=\\\"userSpaceOnUse\\\"><circle cx=\\\"25\\\" cy=\\\"25\\\" r=\\\"1\\\" fill=\\\"rgba(255,255,255,0.05)\\\"/><circle cx=\\\"75\\\" cy=\\\"75\\\" r=\\\"1\\\" fill=\\\"rgba(255,255,255,0.05)\\\"/><circle cx=\\\"50\\\" cy=\\\"10\\\" r=\\\"0.5\\\" fill=\\\"rgba(255,255,255,0.03)\\\"/><circle cx=\\\"10\\\" cy=\\\"60\\\" r=\\\"0.5\\\" fill=\\\"rgba(255,255,255,0.03)\\\"/><circle cx=\\\"90\\\" cy=\\\"40\\\" r=\\\"0.5\\\" fill=\\\"rgba(255,255,255,0.03)\\\"/></pattern></defs><rect width=\\\"100\\\" height=\\\"100\\\" fill=\\\"url(%23grain)\\\"/></svg>');\\r\\n  pointer-events: none;\\r\\n  z-index: 0;\\r\\n}\\r\\n\\r\\n\\r\\n.navbar[_ngcontent-%COMP%] {\\r\\n  background: rgba(255, 255, 255, 0.95) !important;\\r\\n  backdrop-filter: blur(10px);\\r\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\\r\\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\\r\\n  z-index: 1000;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.navbar-brand[_ngcontent-%COMP%] {\\r\\n  font-weight: 700;\\r\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\r\\n  -webkit-background-clip: text;\\r\\n  -webkit-text-fill-color: transparent;\\r\\n  background-clip: text;\\r\\n}\\r\\n\\r\\n.main-content[_ngcontent-%COMP%] {\\r\\n  height: calc(100vh - 56px);\\r\\n  position: relative;\\r\\n  z-index: 1;\\r\\n}\\r\\n\\r\\n\\r\\n.sidebar[_ngcontent-%COMP%] {\\r\\n  background: rgba(255, 255, 255, 0.95);\\r\\n  backdrop-filter: blur(10px);\\r\\n  border-right: 1px solid rgba(255, 255, 255, 0.2);\\r\\n  height: 100%;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);\\r\\n}\\r\\n\\r\\n.sidebar-tabs[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  border-bottom: 1px solid rgba(102, 126, 234, 0.1);\\r\\n  background: rgba(255, 255, 255, 0.8);\\r\\n}\\r\\n\\r\\n.tab-button[_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n  padding: 1.25rem;\\r\\n  border: none;\\r\\n  background-color: transparent;\\r\\n  color: #6c757d;\\r\\n  font-weight: 600;\\r\\n  transition: all 0.3s ease;\\r\\n  border-bottom: 3px solid transparent;\\r\\n  position: relative;\\r\\n  overflow: hidden;\\r\\n}\\r\\n\\r\\n.tab-button[_ngcontent-%COMP%]::before {\\r\\n  content: '';\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: -100%;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);\\r\\n  transition: left 0.5s;\\r\\n}\\r\\n\\r\\n.tab-button[_ngcontent-%COMP%]:hover::before {\\r\\n  left: 100%;\\r\\n}\\r\\n\\r\\n.tab-button[_ngcontent-%COMP%]:hover {\\r\\n  background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);\\r\\n  color: #495057;\\r\\n  transform: translateY(-1px);\\r\\n}\\r\\n\\r\\n.tab-button.active[_ngcontent-%COMP%] {\\r\\n  color: #667eea;\\r\\n  border-bottom-color: #667eea;\\r\\n  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\\r\\n  box-shadow: inset 0 -3px 0 #667eea;\\r\\n}\\r\\n\\r\\n.tab-content[_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n  overflow-y: auto;\\r\\n  background: rgba(255, 255, 255, 0.5);\\r\\n}\\r\\n\\r\\n\\r\\n.chat-area[_ngcontent-%COMP%] {\\r\\n  background: rgba(255, 255, 255, 0.95);\\r\\n  backdrop-filter: blur(10px);\\r\\n  height: 100%;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  border-radius: 0 20px 0 0;\\r\\n  overflow: hidden;\\r\\n}\\r\\n\\r\\n\\r\\n.chat-header[_ngcontent-%COMP%] {\\r\\n  padding: 1.5rem;\\r\\n  border-bottom: 1px solid rgba(102, 126, 234, 0.1);\\r\\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);\\r\\n  backdrop-filter: blur(10px);\\r\\n  flex-shrink: 0;\\r\\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\\r\\n}\\r\\n\\r\\n.user-avatar[_ngcontent-%COMP%], .group-avatar[_ngcontent-%COMP%] {\\r\\n  position: relative;\\r\\n  flex-shrink: 0;\\r\\n}\\r\\n\\r\\n.avatar-circle[_ngcontent-%COMP%] {\\r\\n  width: 50px;\\r\\n  height: 50px;\\r\\n  border-radius: 50%;\\r\\n  background: linear-gradient(135deg, #667eea, #764ba2);\\r\\n  color: white;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  font-weight: 700;\\r\\n  font-size: 18px;\\r\\n  position: relative;\\r\\n  transition: all 0.3s ease;\\r\\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);\\r\\n}\\r\\n\\r\\n.avatar-circle[_ngcontent-%COMP%]:hover {\\r\\n  transform: scale(1.05);\\r\\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\\r\\n}\\r\\n\\r\\n.avatar-circle.online[_ngcontent-%COMP%] {\\r\\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3), 0 0 0 3px rgba(40, 167, 69, 0.3);\\r\\n}\\r\\n\\r\\n.avatar-circle.group[_ngcontent-%COMP%] {\\r\\n  background: linear-gradient(135deg, #48bb78, #38b2ac);\\r\\n  box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);\\r\\n}\\r\\n\\r\\n.status-indicator[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  bottom: -2px;\\r\\n  right: -2px;\\r\\n  width: 16px;\\r\\n  height: 16px;\\r\\n  border-radius: 50%;\\r\\n  border: 3px solid #ffffff;\\r\\n  background-color: #a0aec0;\\r\\n  transition: all 0.3s ease;\\r\\n}\\r\\n\\r\\n.status-indicator.online[_ngcontent-%COMP%] {\\r\\n  background-color: #48bb78;\\r\\n  animation: _ngcontent-%COMP%_pulse 2s infinite;\\r\\n  box-shadow: 0 0 10px rgba(72, 187, 120, 0.5);\\r\\n}\\r\\n\\r\\n@keyframes _ngcontent-%COMP%_pulse {\\r\\n  0% {\\r\\n    box-shadow: 0 0 0 0 rgba(72, 187, 120, 0.7);\\r\\n  }\\r\\n  70% {\\r\\n    box-shadow: 0 0 0 8px rgba(72, 187, 120, 0);\\r\\n  }\\r\\n  100% {\\r\\n    box-shadow: 0 0 0 0 rgba(72, 187, 120, 0);\\r\\n  }\\r\\n}\\r\\n\\r\\n.user-status-online[_ngcontent-%COMP%] {\\r\\n  color: #48bb78;\\r\\n  font-weight: 600;\\r\\n}\\r\\n\\r\\n.user-status-offline[_ngcontent-%COMP%] {\\r\\n  color: #a0aec0;\\r\\n  font-weight: 500;\\r\\n}\\r\\n\\r\\n.chat-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] {\\r\\n  border-radius: 12px;\\r\\n  width: 40px;\\r\\n  height: 40px;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  border: 2px solid rgba(102, 126, 234, 0.1);\\r\\n  background: rgba(255, 255, 255, 0.8);\\r\\n  color: #667eea;\\r\\n  transition: all 0.3s ease;\\r\\n}\\r\\n\\r\\n.chat-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover {\\r\\n  background: linear-gradient(135deg, #667eea, #764ba2);\\r\\n  color: white;\\r\\n  transform: translateY(-2px);\\r\\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);\\r\\n}\\r\\n\\r\\n\\r\\n.welcome-area[_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);\\r\\n  backdrop-filter: blur(10px);\\r\\n  animation: _ngcontent-%COMP%_fadeIn 0.6s ease-out;\\r\\n}\\r\\n\\r\\n.welcome-area[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%] {\\r\\n  padding: 3rem;\\r\\n  border-radius: 20px;\\r\\n  background: rgba(255, 255, 255, 0.1);\\r\\n  backdrop-filter: blur(10px);\\r\\n  border: 1px solid rgba(255, 255, 255, 0.2);\\r\\n}\\r\\n\\r\\n.welcome-area[_ngcontent-%COMP%]   .fa-comments[_ngcontent-%COMP%] {\\r\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\r\\n  -webkit-background-clip: text;\\r\\n  -webkit-text-fill-color: transparent;\\r\\n  background-clip: text;\\r\\n  animation: _ngcontent-%COMP%_float 3s ease-in-out infinite;\\r\\n}\\r\\n\\r\\n@keyframes _ngcontent-%COMP%_float {\\r\\n  0%, 100% { transform: translateY(0px); }\\r\\n  50% { transform: translateY(-10px); }\\r\\n}\\r\\n\\r\\n\\r\\n.message-area[_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n  overflow-y: auto;\\r\\n  padding: 1.5rem;\\r\\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);\\r\\n  backdrop-filter: blur(10px);\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.loading-state[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  height: 100%;\\r\\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease;\\r\\n}\\r\\n\\r\\n.loading-state[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%] {\\r\\n  color: #667eea;\\r\\n}\\r\\n\\r\\n.messages-container[_ngcontent-%COMP%] {\\r\\n  min-height: 100%;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  gap: 0.75rem;\\r\\n}\\r\\n\\r\\n.empty-messages[_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  animation: _ngcontent-%COMP%_fadeIn 0.6s ease-out;\\r\\n}\\r\\n\\r\\n.empty-messages[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%] {\\r\\n  padding: 2rem;\\r\\n  border-radius: 15px;\\r\\n  background: rgba(255, 255, 255, 0.1);\\r\\n  backdrop-filter: blur(10px);\\r\\n  border: 1px solid rgba(255, 255, 255, 0.2);\\r\\n}\\r\\n\\r\\n.empty-messages[_ngcontent-%COMP%]   .fa-comment-dots[_ngcontent-%COMP%] {\\r\\n  color: #667eea;\\r\\n  animation: _ngcontent-%COMP%_bounce 2s infinite;\\r\\n}\\r\\n\\r\\n@keyframes _ngcontent-%COMP%_bounce {\\r\\n  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }\\r\\n  40% { transform: translateY(-10px); }\\r\\n  60% { transform: translateY(-5px); }\\r\\n}\\r\\n\\r\\n\\r\\n.typing-indicator[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  padding: 0.75rem 1.5rem;\\r\\n  margin-top: 1rem;\\r\\n  background: rgba(255, 255, 255, 0.1);\\r\\n  backdrop-filter: blur(10px);\\r\\n  border-radius: 15px;\\r\\n  border: 1px solid rgba(255, 255, 255, 0.2);\\r\\n  animation: slideUp 0.3s ease;\\r\\n}\\r\\n\\r\\n.typing-dots[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  padding: 0.5rem;\\r\\n  background: rgba(102, 126, 234, 0.1);\\r\\n  border-radius: 10px;\\r\\n}\\r\\n\\r\\n.typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\r\\n  width: 10px;\\r\\n  height: 10px;\\r\\n  border-radius: 50%;\\r\\n  background: linear-gradient(135deg, #667eea, #764ba2);\\r\\n  margin: 0 3px;\\r\\n  animation: _ngcontent-%COMP%_typing 1.4s infinite ease-in-out;\\r\\n  box-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);\\r\\n}\\r\\n\\r\\n.typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1) {\\r\\n  animation-delay: -0.32s;\\r\\n}\\r\\n\\r\\n.typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2) {\\r\\n  animation-delay: -0.16s;\\r\\n}\\r\\n\\r\\n@keyframes _ngcontent-%COMP%_typing {\\r\\n  0%, 80%, 100% {\\r\\n    transform: scale(0.8);\\r\\n    opacity: 0.5;\\r\\n  }\\r\\n  40% {\\r\\n    transform: scale(1.2);\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n\\r\\n.message-input[_ngcontent-%COMP%] {\\r\\n  border-top: 1px solid rgba(102, 126, 234, 0.1);\\r\\n  padding: 1.5rem;\\r\\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);\\r\\n  backdrop-filter: blur(10px);\\r\\n  flex-shrink: 0;\\r\\n  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.05);\\r\\n}\\r\\n\\r\\n.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%] {\\r\\n  border-radius: 25px 0 0 25px;\\r\\n  border: 2px solid rgba(102, 126, 234, 0.2);\\r\\n  border-right: none;\\r\\n  padding: 0.875rem 1.25rem;\\r\\n  font-size: 0.95rem;\\r\\n  background: rgba(255, 255, 255, 0.9);\\r\\n  transition: all 0.3s ease;\\r\\n}\\r\\n\\r\\n.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus {\\r\\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\\r\\n  border-color: #667eea;\\r\\n  background: rgba(255, 255, 255, 1);\\r\\n  transform: translateY(-1px);\\r\\n}\\r\\n\\r\\n.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder {\\r\\n  color: #a0aec0;\\r\\n  font-style: italic;\\r\\n}\\r\\n\\r\\n.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] {\\r\\n  border-radius: 0 25px 25px 0;\\r\\n  border: 2px solid #667eea;\\r\\n  border-left: none;\\r\\n  padding: 0.875rem 1.5rem;\\r\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\r\\n  transition: all 0.3s ease;\\r\\n  position: relative;\\r\\n  overflow: hidden;\\r\\n}\\r\\n\\r\\n.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]::before {\\r\\n  content: '';\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: -100%;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\r\\n  transition: left 0.5s;\\r\\n}\\r\\n\\r\\n.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover::before {\\r\\n  left: 100%;\\r\\n}\\r\\n\\r\\n.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled) {\\r\\n  transform: translateY(-2px);\\r\\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\\r\\n  background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);\\r\\n}\\r\\n\\r\\n.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled {\\r\\n  background: #cbd5e0;\\r\\n  border-color: #cbd5e0;\\r\\n  transform: none;\\r\\n  box-shadow: none;\\r\\n}\\r\\n\\r\\n.character-counter[_ngcontent-%COMP%] {\\r\\n  text-align: right;\\r\\n  margin-top: 0.5rem;\\r\\n  font-size: 0.875rem;\\r\\n  color: #667eea;\\r\\n  font-weight: 500;\\r\\n}\\r\\n\\r\\n.connection-indicator[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  font-size: 0.875rem;\\r\\n}\\r\\n\\r\\n.connection-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\r\\n  margin-right: 0.25rem;\\r\\n  font-size: 0.75rem;\\r\\n}\\r\\n\\r\\n\\r\\n.message-area[_ngcontent-%COMP%]::-webkit-scrollbar {\\r\\n  width: 6px;\\r\\n}\\r\\n\\r\\n.message-area[_ngcontent-%COMP%]::-webkit-scrollbar-track {\\r\\n  background: #f1f1f1;\\r\\n}\\r\\n\\r\\n.message-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\\r\\n  background: #c1c1c1;\\r\\n  border-radius: 3px;\\r\\n}\\r\\n\\r\\n.message-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\\r\\n  background: #a8a8a8;\\r\\n}\\r\\n\\r\\n\\r\\n@media (max-width: 768px) {\\r\\n  .sidebar[_ngcontent-%COMP%] {\\r\\n    position: absolute;\\r\\n    left: -100%;\\r\\n    width: 100%;\\r\\n    z-index: 1000;\\r\\n    transition: left 0.3s ease;\\r\\n  }\\r\\n\\r\\n  .sidebar.show[_ngcontent-%COMP%] {\\r\\n    left: 0;\\r\\n  }\\r\\n\\r\\n  .chat-area[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n  }\\r\\n\\r\\n  .chat-header[_ngcontent-%COMP%] {\\r\\n    padding: 0.75rem;\\r\\n  }\\r\\n\\r\\n  .avatar-circle[_ngcontent-%COMP%] {\\r\\n    width: 40px;\\r\\n    height: 40px;\\r\\n    font-size: 16px;\\r\\n  }\\r\\n\\r\\n  .status-indicator[_ngcontent-%COMP%] {\\r\\n    width: 12px;\\r\\n    height: 12px;\\r\\n    border-width: 2px;\\r\\n  }\\r\\n\\r\\n  .message-input[_ngcontent-%COMP%] {\\r\\n    padding: 0.75rem;\\r\\n  }\\r\\n\\r\\n  .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] {\\r\\n    padding: 0.6rem 0.9rem;\\r\\n  }\\r\\n}\\r\\n\\r\\n\\r\\n.chat-area[_ngcontent-%COMP%] {\\r\\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease-in;\\r\\n}\\r\\n\\r\\n@keyframes _ngcontent-%COMP%_fadeIn {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n    transform: translateY(10px);\\r\\n  }\\r\\n\\r\\n  to {\\r\\n    opacity: 1;\\r\\n    transform: translateY(0);\\r\\n  }\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jaGF0LXJvb20vY2hhdC1yb29tLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsNENBQTRDO0FBQzVDO0VBQ0UsYUFBYTtFQUNiLGdCQUFnQjtFQUNoQiw2REFBNkQ7RUFDN0Qsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sT0FBTztFQUNQLFFBQVE7RUFDUixTQUFTO0VBQ1Qsd2pCQUF3akI7RUFDeGpCLG9CQUFvQjtFQUNwQixVQUFVO0FBQ1o7O0FBRUEsK0JBQStCO0FBQy9CO0VBQ0UsZ0RBQWdEO0VBQ2hELDJCQUEyQjtFQUMzQixpREFBaUQ7RUFDakQseUNBQXlDO0VBQ3pDLGFBQWE7RUFDYixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsNkRBQTZEO0VBQzdELDZCQUE2QjtFQUM3QixvQ0FBb0M7RUFDcEMscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsMEJBQTBCO0VBQzFCLGtCQUFrQjtFQUNsQixVQUFVO0FBQ1o7O0FBRUEsb0JBQW9CO0FBQ3BCO0VBQ0UscUNBQXFDO0VBQ3JDLDJCQUEyQjtFQUMzQixnREFBZ0Q7RUFDaEQsWUFBWTtFQUNaLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIseUNBQXlDO0FBQzNDOztBQUVBO0VBQ0UsYUFBYTtFQUNiLGlEQUFpRDtFQUNqRCxvQ0FBb0M7QUFDdEM7O0FBRUE7RUFDRSxPQUFPO0VBQ1AsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWiw2QkFBNkI7RUFDN0IsY0FBYztFQUNkLGdCQUFnQjtFQUNoQix5QkFBeUI7RUFDekIsb0NBQW9DO0VBQ3BDLGtCQUFrQjtFQUNsQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLE1BQU07RUFDTixXQUFXO0VBQ1gsV0FBVztFQUNYLFlBQVk7RUFDWixzRkFBc0Y7RUFDdEYscUJB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bkI7O0VBRUE7SUFDRSxnQkFBZ0I7RUFDbEI7O0VBRUE7O0lBRUUsc0JBQXNCO0VBQ3hCO0FBQ0Y7O0FBRUEscUNBQXFDO0FBQ3JDO0VBQ0UsOEJBQThCO0FBQ2hDOztBQUVBO0VBQ0U7SUFDRSxVQUFVO0lBQ1YsMkJBQTJCO0VBQzdCOztFQUVBO0lBQ0UsVUFBVTtJQUNWLHdCQUF3QjtFQUMxQjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyogTWFpbiBjb250YWluZXIgd2l0aCBncmFkaWVudCBiYWNrZ3JvdW5kICovXHJcbi5jaGF0LWNvbnRhaW5lciB7XHJcbiAgaGVpZ2h0OiAxMDB2aDtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG59XHJcblxyXG4uY2hhdC1jb250YWluZXI6OmJlZm9yZSB7XHJcbiAgY29udGVudDogJyc7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogMDtcclxuICBsZWZ0OiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIGJvdHRvbTogMDtcclxuICBiYWNrZ3JvdW5kOiB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbCw8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIj48ZGVmcz48cGF0dGVybiBpZD1cImdyYWluXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIiBwYXR0ZXJuVW5pdHM9XCJ1c2VyU3BhY2VPblVzZVwiPjxjaXJjbGUgY3g9XCIyNVwiIGN5PVwiMjVcIiByPVwiMVwiIGZpbGw9XCJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpXCIvPjxjaXJjbGUgY3g9XCI3NVwiIGN5PVwiNzVcIiByPVwiMVwiIGZpbGw9XCJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpXCIvPjxjaXJjbGUgY3g9XCI1MFwiIGN5PVwiMTBcIiByPVwiMC41XCIgZmlsbD1cInJnYmEoMjU1LDI1NSwyNTUsMC4wMylcIi8+PGNpcmNsZSBjeD1cIjEwXCIgY3k9XCI2MFwiIHI9XCIwLjVcIiBmaWxsPVwicmdiYSgyNTUsMjU1LDI1NSwwLjAzKVwiLz48Y2lyY2xlIGN4PVwiOTBcIiBjeT1cIjQwXCIgcj1cIjAuNVwiIGZpbGw9XCJyZ2JhKDI1NSwyNTUsMjU1LDAuMDMpXCIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIiBmaWxsPVwidXJsKCUyM2dyYWluKVwiLz48L3N2Zz4nKTtcclxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICB6LWluZGV4OiAwO1xyXG59XHJcblxyXG4vKiBOYXZpZ2F0aW9uIGJhciBlbmhhbmNlbWVudCAqL1xyXG4ubmF2YmFyIHtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOTUpICFpbXBvcnRhbnQ7XHJcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpO1xyXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggMjBweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgei1pbmRleDogMTAwMDtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbn1cclxuXHJcbi5uYXZiYXItYnJhbmQge1xyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTtcclxuICAtd2Via2l0LWJhY2tncm91bmQtY2xpcDogdGV4dDtcclxuICAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgYmFja2dyb3VuZC1jbGlwOiB0ZXh0O1xyXG59XHJcblxyXG4ubWFpbi1jb250ZW50IHtcclxuICBoZWlnaHQ6IGNhbGMoMTAwdmggLSA1NnB4KTtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgei1pbmRleDogMTtcclxufVxyXG5cclxuLyogU2lkZWJhciBzdHlsaW5nICovXHJcbi5zaWRlYmFyIHtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOTUpO1xyXG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTtcclxuICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBib3gtc2hhZG93OiA0cHggMCAyMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxufVxyXG5cclxuLnNpZGViYXItdGFicyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjEpO1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcclxufVxyXG5cclxuLnRhYi1idXR0b24ge1xyXG4gIGZsZXg6IDE7XHJcbiAgcGFkZGluZzogMS4yNXJlbTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgY29sb3I6ICM2Yzc1N2Q7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xyXG4gIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB0cmFuc3BhcmVudDtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG5cclxuLnRhYi1idXR0b246OmJlZm9yZSB7XHJcbiAgY29udGVudDogJyc7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogMDtcclxuICBsZWZ0OiAtMTAwJTtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCB0cmFuc3BhcmVudCwgcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjEpLCB0cmFuc3BhcmVudCk7XHJcbiAgdHJhbnNpdGlvbjogbGVmdCAwLjVzO1xyXG59XHJcblxyXG4udGFiLWJ1dHRvbjpob3Zlcjo6YmVmb3JlIHtcclxuICBsZWZ0OiAxMDAlO1xyXG59XHJcblxyXG4udGFiLWJ1dHRvbjpob3ZlciB7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjA1KSAwJSwgcmdiYSgxMTgsIDc1LCAxNjIsIDAuMDUpIDEwMCUpO1xyXG4gIGNvbG9yOiAjNDk1MDU3O1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcclxufVxyXG5cclxuLnRhYi1idXR0b24uYWN0aXZlIHtcclxuICBjb2xvcjogIzY2N2VlYTtcclxuICBib3JkZXItYm90dG9tLWNvbG9yOiAjNjY3ZWVhO1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHJnYmEoMTAyLCAxMjYsIDIzNCwgMC4xKSAwJSwgcmdiYSgxMTgsIDc1LCAxNjIsIDAuMSkgMTAwJSk7XHJcbiAgYm94LXNoYWRvdzogaW5zZXQgMCAtM3B4IDAgIzY2N2VlYTtcclxufVxyXG5cclxuLnRhYi1jb250ZW50IHtcclxuICBmbGV4OiAxO1xyXG4gIG92ZXJmbG93LXk6IGF1dG87XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpO1xyXG59XHJcblxyXG4vKiBDaGF0IGFyZWEgc3R5bGluZyAqL1xyXG4uY2hhdC1hcmVhIHtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOTUpO1xyXG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGJvcmRlci1yYWRpdXM6IDAgMjBweCAwIDA7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG5cclxuLyogQ2hhdCBoZWFkZXIgc3R5bGluZyAqL1xyXG4uY2hhdC1oZWFkZXIge1xyXG4gIHBhZGRpbmc6IDEuNXJlbTtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjEpO1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KSAwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpIDEwMCUpO1xyXG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTtcclxuICBmbGV4LXNocmluazogMDtcclxuICBib3gtc2hhZG93OiAwIDRweCAyMHB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7XHJcbn1cclxuXHJcbi51c2VyLWF2YXRhciwgLmdyb3VwLWF2YXRhciB7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gIGZsZXgtc2hyaW5rOiAwO1xyXG59XHJcblxyXG4uYXZhdGFyLWNpcmNsZSB7XHJcbiAgd2lkdGg6IDUwcHg7XHJcbiAgaGVpZ2h0OiA1MHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhLCAjNzY0YmEyKTtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgZm9udC1zaXplOiAxOHB4O1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xyXG4gIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjMpO1xyXG59XHJcblxyXG4uYXZhdGFyLWNpcmNsZTpob3ZlciB7XHJcbiAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTtcclxuICBib3gtc2hhZG93OiAwIDZweCAyMHB4IHJnYmEoMTAyLCAxMjYsIDIzNCwgMC40KTtcclxufVxyXG5cclxuLmF2YXRhci1jaXJjbGUub25saW5lIHtcclxuICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMTAyLCAxMjYsIDIzNCwgMC4zKSwgMCAwIDAgM3B4IHJnYmEoNDAsIDE2NywgNjksIDAuMyk7XHJcbn1cclxuXHJcbi5hdmF0YXItY2lyY2xlLmdyb3VwIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNDhiYjc4LCAjMzhiMmFjKTtcclxuICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoNzIsIDE4NywgMTIwLCAwLjMpO1xyXG59XHJcblxyXG4uc3RhdHVzLWluZGljYXRvciB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGJvdHRvbTogLTJweDtcclxuICByaWdodDogLTJweDtcclxuICB3aWR0aDogMTZweDtcclxuICBoZWlnaHQ6IDE2cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIGJvcmRlcjogM3B4IHNvbGlkICNmZmZmZmY7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2EwYWVjMDtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xyXG59XHJcblxyXG4uc3RhdHVzLWluZGljYXRvci5vbmxpbmUge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM0OGJiNzg7XHJcbiAgYW5pbWF0aW9uOiBwdWxzZSAycyBpbmZpbml0ZTtcclxuICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDcyLCAxODcsIDEyMCwgMC41KTtcclxufVxyXG5cclxuQGtleWZyYW1lcyBwdWxzZSB7XHJcbiAgMCUge1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDAgMCByZ2JhKDcyLCAxODcsIDEyMCwgMC43KTtcclxuICB9XHJcbiAgNzAlIHtcclxuICAgIGJveC1zaGFkb3c6IDAgMCAwIDhweCByZ2JhKDcyLCAxODcsIDEyMCwgMCk7XHJcbiAgfVxyXG4gIDEwMCUge1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDAgMCByZ2JhKDcyLCAxODcsIDEyMCwgMCk7XHJcbiAgfVxyXG59XHJcblxyXG4udXNlci1zdGF0dXMtb25saW5lIHtcclxuICBjb2xvcjogIzQ4YmI3ODtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG59XHJcblxyXG4udXNlci1zdGF0dXMtb2ZmbGluZSB7XHJcbiAgY29sb3I6ICNhMGFlYzA7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxufVxyXG5cclxuLmNoYXQtYWN0aW9ucyAuYnRuIHtcclxuICBib3JkZXItcmFkaXVzOiAxMnB4O1xyXG4gIHdpZHRoOiA0MHB4O1xyXG4gIGhlaWdodDogNDBweDtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYm9yZGVyOiAycHggc29saWQgcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjEpO1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcclxuICBjb2xvcjogIzY2N2VlYTtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xyXG59XHJcblxyXG4uY2hhdC1hY3Rpb25zIC5idG46aG92ZXIge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEsICM3NjRiYTIpO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XHJcbiAgYm94LXNoYWRvdzogMCA2cHggMjBweCByZ2JhKDEwMiwgMTI2LCAyMzQsIDAuMyk7XHJcbn1cclxuXHJcbi8qIFdlbGNvbWUgYXJlYSBzdHlsaW5nICovXHJcbi53ZWxjb21lLWFyZWEge1xyXG4gIGZsZXg6IDE7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKSAwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KSAxMDAlKTtcclxuICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7XHJcbiAgYW5pbWF0aW9uOiBmYWRlSW4gMC42cyBlYXNlLW91dDtcclxufVxyXG5cclxuLndlbGNvbWUtYXJlYSAudGV4dC1jZW50ZXIge1xyXG4gIHBhZGRpbmc6IDNyZW07XHJcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XHJcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTtcclxufVxyXG5cclxuLndlbGNvbWUtYXJlYSAuZmEtY29tbWVudHMge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7XHJcbiAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7XHJcbiAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gIGJhY2tncm91bmQtY2xpcDogdGV4dDtcclxuICBhbmltYXRpb246IGZsb2F0IDNzIGVhc2UtaW4tb3V0IGluZmluaXRlO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGZsb2F0IHtcclxuICAwJSwgMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwcHgpOyB9XHJcbiAgNTAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTsgfVxyXG59XHJcblxyXG4vKiBNZXNzYWdlIGFyZWEgc3R5bGluZyAqL1xyXG4ubWVzc2FnZS1hcmVhIHtcclxuICBmbGV4OiAxO1xyXG4gIG92ZXJmbG93LXk6IGF1dG87XHJcbiAgcGFkZGluZzogMS41cmVtO1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKSAwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KSAxMDAlKTtcclxuICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG59XHJcblxyXG4ubG9hZGluZy1zdGF0ZSB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIGFuaW1hdGlvbjogZmFkZUluIDAuM3MgZWFzZTtcclxufVxyXG5cclxuLmxvYWRpbmctc3RhdGUgLnNwaW5uZXItYm9yZGVyIHtcclxuICBjb2xvcjogIzY2N2VlYTtcclxufVxyXG5cclxuLm1lc3NhZ2VzLWNvbnRhaW5lciB7XHJcbiAgbWluLWhlaWdodDogMTAwJTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgZ2FwOiAwLjc1cmVtO1xyXG59XHJcblxyXG4uZW1wdHktbWVzc2FnZXMge1xyXG4gIGZsZXg6IDE7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGFuaW1hdGlvbjogZmFkZUluIDAuNnMgZWFzZS1vdXQ7XHJcbn1cclxuXHJcbi5lbXB0eS1tZXNzYWdlcyAudGV4dC1jZW50ZXIge1xyXG4gIHBhZGRpbmc6IDJyZW07XHJcbiAgYm9yZGVyLXJhZGl1czogMTVweDtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XHJcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTtcclxufVxyXG5cclxuLmVtcHR5LW1lc3NhZ2VzIC5mYS1jb21tZW50LWRvdHMge1xyXG4gIGNvbG9yOiAjNjY3ZWVhO1xyXG4gIGFuaW1hdGlvbjogYm91bmNlIDJzIGluZmluaXRlO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGJvdW5jZSB7XHJcbiAgMCUsIDIwJSwgNTAlLCA4MCUsIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH1cclxuICA0MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpOyB9XHJcbiAgNjAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01cHgpOyB9XHJcbn1cclxuXHJcbi8qIFR5cGluZyBpbmRpY2F0b3Igc3R5bGluZyAqL1xyXG4udHlwaW5nLWluZGljYXRvciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIHBhZGRpbmc6IDAuNzVyZW0gMS41cmVtO1xyXG4gIG1hcmdpbi10b3A6IDFyZW07XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO1xyXG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTtcclxuICBib3JkZXItcmFkaXVzOiAxNXB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTtcclxuICBhbmltYXRpb246IHNsaWRlVXAgMC4zcyBlYXNlO1xyXG59XHJcblxyXG4udHlwaW5nLWRvdHMge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBwYWRkaW5nOiAwLjVyZW07XHJcbiAgYmFja2dyb3VuZDogcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjEpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbn1cclxuXHJcbi50eXBpbmctZG90cyBzcGFuIHtcclxuICB3aWR0aDogMTBweDtcclxuICBoZWlnaHQ6IDEwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEsICM3NjRiYTIpO1xyXG4gIG1hcmdpbjogMCAzcHg7XHJcbiAgYW5pbWF0aW9uOiB0eXBpbmcgMS40cyBpbmZpbml0ZSBlYXNlLWluLW91dDtcclxuICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjMpO1xyXG59XHJcblxyXG4udHlwaW5nLWRvdHMgc3BhbjpudGgtY2hpbGQoMSkge1xyXG4gIGFuaW1hdGlvbi1kZWxheTogLTAuMzJzO1xyXG59XHJcblxyXG4udHlwaW5nLWRvdHMgc3BhbjpudGgtY2hpbGQoMikge1xyXG4gIGFuaW1hdGlvbi1kZWxheTogLTAuMTZzO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIHR5cGluZyB7XHJcbiAgMCUsIDgwJSwgMTAwJSB7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOCk7XHJcbiAgICBvcGFjaXR5OiAwLjU7XHJcbiAgfVxyXG4gIDQwJSB7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMik7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG4gIH1cclxufVxyXG5cclxuLyogTWVzc2FnZSBpbnB1dCBzdHlsaW5nICovXHJcbi5tZXNzYWdlLWlucHV0IHtcclxuICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjEpO1xyXG4gIHBhZGRpbmc6IDEuNXJlbTtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSkgMCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KSAxMDAlKTtcclxuICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7XHJcbiAgZmxleC1zaHJpbms6IDA7XHJcbiAgYm94LXNoYWRvdzogMCAtNHB4IDIwcHggcmdiYSgwLCAwLCAwLCAwLjA1KTtcclxufVxyXG5cclxuLmlucHV0LWdyb3VwIC5mb3JtLWNvbnRyb2wge1xyXG4gIGJvcmRlci1yYWRpdXM6IDI1cHggMCAwIDI1cHg7XHJcbiAgYm9yZGVyOiAycHggc29saWQgcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjIpO1xyXG4gIGJvcmRlci1yaWdodDogbm9uZTtcclxuICBwYWRkaW5nOiAwLjg3NXJlbSAxLjI1cmVtO1xyXG4gIGZvbnQtc2l6ZTogMC45NXJlbTtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSk7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcclxufVxyXG5cclxuLmlucHV0LWdyb3VwIC5mb3JtLWNvbnRyb2w6Zm9jdXMge1xyXG4gIGJveC1zaGFkb3c6IDAgMCAwIDNweCByZ2JhKDEwMiwgMTI2LCAyMzQsIDAuMSk7XHJcbiAgYm9yZGVyLWNvbG9yOiAjNjY3ZWVhO1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMSk7XHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpO1xyXG59XHJcblxyXG4uaW5wdXQtZ3JvdXAgLmZvcm0tY29udHJvbDo6cGxhY2Vob2xkZXIge1xyXG4gIGNvbG9yOiAjYTBhZWMwO1xyXG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcclxufVxyXG5cclxuLmlucHV0LWdyb3VwIC5idG4ge1xyXG4gIGJvcmRlci1yYWRpdXM6IDAgMjVweCAyNXB4IDA7XHJcbiAgYm9yZGVyOiAycHggc29saWQgIzY2N2VlYTtcclxuICBib3JkZXItbGVmdDogbm9uZTtcclxuICBwYWRkaW5nOiAwLjg3NXJlbSAxLjVyZW07XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG59XHJcblxyXG4uaW5wdXQtZ3JvdXAgLmJ0bjo6YmVmb3JlIHtcclxuICBjb250ZW50OiAnJztcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwO1xyXG4gIGxlZnQ6IC0xMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsIHRyYW5zcGFyZW50LCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMiksIHRyYW5zcGFyZW50KTtcclxuICB0cmFuc2l0aW9uOiBsZWZ0IDAuNXM7XHJcbn1cclxuXHJcbi5pbnB1dC1ncm91cCAuYnRuOmhvdmVyOjpiZWZvcmUge1xyXG4gIGxlZnQ6IDEwMCU7XHJcbn1cclxuXHJcbi5pbnB1dC1ncm91cCAuYnRuOmhvdmVyOm5vdCg6ZGlzYWJsZWQpIHtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XHJcbiAgYm94LXNoYWRvdzogMCA2cHggMjBweCByZ2JhKDEwMiwgMTI2LCAyMzQsIDAuNCk7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzVhNjdkOCAwJSwgIzZiNDZjMSAxMDAlKTtcclxufVxyXG5cclxuLmlucHV0LWdyb3VwIC5idG46ZGlzYWJsZWQge1xyXG4gIGJhY2tncm91bmQ6ICNjYmQ1ZTA7XHJcbiAgYm9yZGVyLWNvbG9yOiAjY2JkNWUwO1xyXG4gIHRyYW5zZm9ybTogbm9uZTtcclxuICBib3gtc2hhZG93OiBub25lO1xyXG59XHJcblxyXG4uY2hhcmFjdGVyLWNvdW50ZXIge1xyXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gIG1hcmdpbi10b3A6IDAuNXJlbTtcclxuICBmb250LXNpemU6IDAuODc1cmVtO1xyXG4gIGNvbG9yOiAjNjY3ZWVhO1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbn1cclxuXHJcbi5jb25uZWN0aW9uLWluZGljYXRvciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGZvbnQtc2l6ZTogMC44NzVyZW07XHJcbn1cclxuXHJcbi5jb25uZWN0aW9uLWluZGljYXRvciBpIHtcclxuICBtYXJnaW4tcmlnaHQ6IDAuMjVyZW07XHJcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xyXG59XHJcblxyXG4vKiBTY3JvbGxiYXIgc3R5bGluZyAqL1xyXG4ubWVzc2FnZS1hcmVhOjotd2Via2l0LXNjcm9sbGJhciB7XHJcbiAgd2lkdGg6IDZweDtcclxufVxyXG5cclxuLm1lc3NhZ2UtYXJlYTo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xyXG4gIGJhY2tncm91bmQ6ICNmMWYxZjE7XHJcbn1cclxuXHJcbi5tZXNzYWdlLWFyZWE6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcclxuICBiYWNrZ3JvdW5kOiAjYzFjMWMxO1xyXG4gIGJvcmRlci1yYWRpdXM6IDNweDtcclxufVxyXG5cclxuLm1lc3NhZ2UtYXJlYTo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIge1xyXG4gIGJhY2tncm91bmQ6ICNhOGE4YTg7XHJcbn1cclxuXHJcbi8qIFJlc3BvbnNpdmUgYWRqdXN0bWVudHMgKi9cclxuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XHJcbiAgLnNpZGViYXIge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbGVmdDogLTEwMCU7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIHotaW5kZXg6IDEwMDA7XHJcbiAgICB0cmFuc2l0aW9uOiBsZWZ0IDAuM3MgZWFzZTtcclxuICB9XHJcblxyXG4gIC5zaWRlYmFyLnNob3cge1xyXG4gICAgbGVmdDogMDtcclxuICB9XHJcblxyXG4gIC5jaGF0LWFyZWEge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgfVxyXG5cclxuICAuY2hhdC1oZWFkZXIge1xyXG4gICAgcGFkZGluZzogMC43NXJlbTtcclxuICB9XHJcblxyXG4gIC5hdmF0YXItY2lyY2xlIHtcclxuICAgIHdpZHRoOiA0MHB4O1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gIH1cclxuXHJcbiAgLnN0YXR1cy1pbmRpY2F0b3Ige1xyXG4gICAgd2lkdGg6IDEycHg7XHJcbiAgICBoZWlnaHQ6IDEycHg7XHJcbiAgICBib3JkZXItd2lkdGg6IDJweDtcclxuICB9XHJcblxyXG4gIC5tZXNzYWdlLWlucHV0IHtcclxuICAgIHBhZGRpbmc6IDAuNzVyZW07XHJcbiAgfVxyXG5cclxuICAuaW5wdXQtZ3JvdXAgLmZvcm0tY29udHJvbCxcclxuICAuaW5wdXQtZ3JvdXAgLmJ0biB7XHJcbiAgICBwYWRkaW5nOiAwLjZyZW0gMC45cmVtO1xyXG4gIH1cclxufVxyXG5cclxuLyogQW5pbWF0aW9uIGZvciBzbW9vdGggdHJhbnNpdGlvbnMgKi9cclxuLmNoYXQtYXJlYSB7XHJcbiAgYW5pbWF0aW9uOiBmYWRlSW4gMC4zcyBlYXNlLWluO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGZhZGVJbiB7XHJcbiAgZnJvbSB7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEwcHgpO1xyXG4gIH1cclxuXHJcbiAgdG8ge1xyXG4gICAgb3BhY2l0eTogMTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcclxuICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["MessageType","i0","ChatRoomComponent","constructor","authService","chatService","groupService","notificationService","router","ngOnInit","currentUser","getCurrentUser","navigate","initializeChat","ngOnDestroy","subscriptions","forEach","sub","unsubscribe","disconnect","ngAfterViewChecked","shouldScrollToBottom","scrollToBottom","connect","messagesSub","subscribeToMessages","subscribe","next","message","isMessageForCurrentConversation","messages","push","error","console","userStatusSub","subscribeToUserStatus","users","filter","user","id","connectionSub","getConnectionStatus","status","connectionStatus","showSuccess","showWarning","messageStatusSub","getMessageStatus","statusUpdate","log","loadUsers","loadGroups","getUsers","getUserGroups","groups","onUserSelected","selectedUser","selectedGroup","loadMessageHistory","onGroupSelected","group","loadGroupMessageHistory","subscribeToGroup","userId","loading","getMessageHistory","groupId","getGroupMessageHistory","sendMessage","newMessage","trim","sender","content","type","CHAT","timestamp","Date","sendGroupMessage","receiver","showError","onKeyPress","event","key","shiftKey","preventDefault","messageArea","nativeElement","scrollTop","scrollHeight","err","logout","updateUserStatus","isOnline","getStatusClass","JOIN","LEAVE","onMessageInput","isTyping","length","getConnectionStatusText","getConnectionStatusClass","trackByMessageId","index","getTime","switchToUsersTab","activeTab","switchToGroupsTab","onCreateGroupClick","showGroupCreate","onGroupCreated","onGroupCreateCancelled","getCurrentConversationName","name","username","isGroupConversation","canSendMessage","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\swatip\\Documents\\FSD Projects\\Chatting-Application\\frontend\\src\\app\\components\\chat-room\\chat-room.component.ts","C:\\Users\\swatip\\Documents\\FSD Projects\\Chatting-Application\\frontend\\src\\app\\components\\chat-room\\chat-room.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy, ViewChild, ElementRef, AfterViewChecked } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { ChatService } from '../../services/chat.service';\r\nimport { GroupService } from '../../services/group.service';\r\nimport { NotificationService } from '../../services/notification.service';\r\nimport { User } from '../../models/user.model';\r\nimport { Message, MessageType } from '../../models/message.model';\r\nimport { Group } from '../../models/group.model';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-chat-room',\r\n  templateUrl: './chat-room.component.html',\r\n  styleUrls: ['./chat-room.component.css']\r\n})\r\nexport class ChatRoomComponent implements OnInit, OnDestroy, AfterViewChecked {\r\n  @ViewChild('messageArea') private messageArea!: ElementRef;\r\n  currentUser: User | null = null;\r\n  users: User[] = [];\r\n  groups: Group[] = [];\r\n  messages: Message[] = [];\r\n  newMessage = '';\r\n  selectedUser: User | null = null;\r\n  selectedGroup: Group | null = null;\r\n  loading = false;\r\n  connectionStatus = false;\r\n  isTyping = false;\r\n  \r\n  // UI state\r\n  activeTab: 'users' | 'groups' = 'users';\r\n  showGroupCreate = false;\r\n  \r\n  private subscriptions: Subscription[] = [];\r\n  private shouldScrollToBottom = false;\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private chatService: ChatService,\r\n    private groupService: GroupService,\r\n    private notificationService: NotificationService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (!this.currentUser) {\r\n      this.router.navigate(['/login']);\r\n      return;\r\n    }\r\n\r\n    this.initializeChat();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscriptions.forEach(sub => sub.unsubscribe());\r\n    this.chatService.disconnect();\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (this.shouldScrollToBottom) {\r\n      this.scrollToBottom();\r\n      this.shouldScrollToBottom = false;\r\n    }\r\n  }\r\n\r\n  private initializeChat(): void {\r\n    // Connect to WebSocket\r\n    this.chatService.connect();\r\n\r\n    // Subscribe to messages\r\n    const messagesSub = this.chatService.subscribeToMessages().subscribe({\r\n      next: (message: Message) => {\r\n        // Only add messages for current conversation or system messages\r\n        if (this.isMessageForCurrentConversation(message)) {\r\n          this.messages.push(message);\r\n          this.shouldScrollToBottom = true;\r\n        }\r\n      },\r\n      error: (error: any) => {\r\n        console.error('Error receiving message:', error);\r\n      }\r\n    });\r\n\r\n    // Subscribe to user status updates\r\n    const userStatusSub = this.chatService.subscribeToUserStatus().subscribe({\r\n      next: (users: User[]) => {\r\n        this.users = users.filter(user => user.id !== this.currentUser?.id);\r\n      },\r\n      error: (error: any) => {\r\n        console.error('Error receiving user status:', error);\r\n      }\r\n    });\r\n\r\n    // Subscribe to connection status\r\n    const connectionSub = this.chatService.getConnectionStatus().subscribe({\r\n      next: (status: boolean) => {\r\n        this.connectionStatus = status;\r\n        if (status) {\r\n          this.notificationService.showSuccess('Connected to chat server');\r\n        } else {\r\n          this.notificationService.showWarning('Disconnected from chat server');\r\n        }\r\n      }\r\n    });\r\n\r\n    // Subscribe to message status updates\r\n    const messageStatusSub = this.chatService.getMessageStatus().subscribe({\r\n      next: (statusUpdate) => {\r\n        // Handle message delivery status updates\r\n        console.log('Message status update:', statusUpdate);\r\n      }\r\n    });\r\n\r\n    this.subscriptions.push(messagesSub, userStatusSub, connectionSub, messageStatusSub);\r\n\r\n    // Load initial data\r\n    this.loadUsers();\r\n    this.loadGroups();\r\n  }\r\n\r\n  private loadUsers(): void {\r\n    this.authService.getUsers().subscribe({\r\n      next: (users: User[]) => {\r\n        this.users = users.filter(user => user.id !== this.currentUser?.id);\r\n      },\r\n      error: (error: any) => {\r\n        console.error('Error loading users:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  private loadGroups(): void {\r\n    this.groupService.getUserGroups().subscribe({\r\n      next: (groups) => {\r\n        this.groups = groups;\r\n      },\r\n      error: (error: any) => {\r\n        console.error('Error loading groups:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  onUserSelected(user: User): void {\r\n    this.selectedUser = user;\r\n    this.selectedGroup = null; // Clear group selection\r\n    this.loadMessageHistory(user.id);\r\n  }\r\n\r\n  onGroupSelected(group: Group): void {\r\n    this.selectedGroup = group;\r\n    this.selectedUser = null; // Clear user selection\r\n    this.loadGroupMessageHistory(group.id);\r\n    // Subscribe to group messages\r\n    this.chatService.subscribeToGroup(group.id);\r\n  }\r\n\r\n  private loadMessageHistory(userId: number): void {\r\n    this.loading = true;\r\n    this.messages = []; // Clear current messages\r\n    \r\n    this.authService.getMessageHistory(userId).subscribe({\r\n      next: (messages: Message[]) => {\r\n        this.messages = messages;\r\n        this.loading = false;\r\n        this.shouldScrollToBottom = true;\r\n      },\r\n      error: (error: any) => {\r\n        console.error('Error loading message history:', error);\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  private loadGroupMessageHistory(groupId: string): void {\r\n    this.loading = true;\r\n    this.messages = []; // Clear current messages\r\n    \r\n    this.authService.getGroupMessageHistory(groupId).subscribe({\r\n      next: (messages: Message[]) => {\r\n        this.messages = messages;\r\n        this.loading = false;\r\n        this.shouldScrollToBottom = true;\r\n      },\r\n      error: (error: any) => {\r\n        console.error('Error loading group message history:', error);\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  sendMessage(): void {\r\n    if (this.newMessage.trim() && this.currentUser && this.connectionStatus) {\r\n      const message: Message = {\r\n        sender: this.currentUser,\r\n        content: this.newMessage.trim(),\r\n        type: MessageType.CHAT,\r\n        timestamp: new Date()\r\n      };\r\n\r\n      try {\r\n        if (this.selectedGroup) {\r\n          // Send group message\r\n          message.groupId = this.selectedGroup.id;\r\n          this.chatService.sendGroupMessage(message, this.selectedGroup.id);\r\n        } else if (this.selectedUser) {\r\n          // Send private message\r\n          message.receiver = this.selectedUser;\r\n          this.chatService.sendMessage(message);\r\n        }\r\n\r\n        this.newMessage = '';\r\n        this.shouldScrollToBottom = true;\r\n      } catch (error) {\r\n        console.error('Error sending message:', error);\r\n        this.notificationService.showError('Failed to send message. Please try again.');\r\n      }\r\n    } else if (!this.connectionStatus) {\r\n      this.notificationService.showWarning('Cannot send message: Not connected to chat server');\r\n    } else if (!this.newMessage.trim()) {\r\n      this.notificationService.showWarning('Please enter a message');\r\n    }\r\n  }\r\n\r\n  onKeyPress(event: KeyboardEvent): void {\r\n    if (event.key === 'Enter' && !event.shiftKey) {\r\n      event.preventDefault();\r\n      this.sendMessage();\r\n    }\r\n  }\r\n\r\n  private scrollToBottom(): void {\r\n    try {\r\n      if (this.messageArea) {\r\n        this.messageArea.nativeElement.scrollTop = this.messageArea.nativeElement.scrollHeight;\r\n      }\r\n    } catch (err) {\r\n      console.error('Error scrolling to bottom:', err);\r\n    }\r\n  }\r\n\r\n  logout(): void {\r\n    // Disconnect from chat service first\r\n    this.chatService.disconnect();\r\n    \r\n    // Update user status to offline and logout\r\n    if (this.currentUser) {\r\n      this.authService.updateUserStatus('OFFLINE').subscribe({\r\n        next: () => {\r\n          this.authService.logout();\r\n          this.router.navigate(['/login']);\r\n        },\r\n        error: () => {\r\n          // Logout even if status update fails\r\n          this.authService.logout();\r\n          this.router.navigate(['/login']);\r\n        }\r\n      });\r\n    } else {\r\n      this.authService.logout();\r\n      this.router.navigate(['/login']);\r\n    }\r\n  }\r\n\r\n  isOnline(user: User): boolean {\r\n    return user.status === 'ONLINE';\r\n  }\r\n\r\n  getStatusClass(user: User): string {\r\n    return this.isOnline(user) ? 'user-status-online' : 'user-status-offline';\r\n  }\r\n\r\n  private isMessageForCurrentConversation(message: Message): boolean {\r\n    // System messages (JOIN/LEAVE) should be shown based on context\r\n    if (message.type === MessageType.JOIN || message.type === MessageType.LEAVE) {\r\n      // Show system messages for the current group or general chat\r\n      if (this.selectedGroup && message.groupId === this.selectedGroup.id) {\r\n        return true;\r\n      }\r\n      // Show general system messages when in private chat\r\n      if (this.selectedUser && !message.groupId) {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    // Group messages\r\n    if (message.groupId) {\r\n      return this.selectedGroup?.id === message.groupId;\r\n    }\r\n\r\n    // Private messages\r\n    if (!this.selectedUser || !this.currentUser) {\r\n      return false;\r\n    }\r\n\r\n    // Show messages between current user and selected user\r\n    return (\r\n      (message.sender.id === this.currentUser.id && message.receiver?.id === this.selectedUser.id) ||\r\n      (message.sender.id === this.selectedUser.id && message.receiver?.id === this.currentUser.id)\r\n    );\r\n  }\r\n\r\n  onMessageInput(): void {\r\n    // Handle typing indicators here if needed\r\n    this.isTyping = this.newMessage.trim().length > 0;\r\n  }\r\n\r\n  getConnectionStatusText(): string {\r\n    return this.connectionStatus ? 'Connected' : 'Disconnected';\r\n  }\r\n\r\n  getConnectionStatusClass(): string {\r\n    return this.connectionStatus ? 'text-success' : 'text-danger';\r\n  }\r\n\r\n  trackByMessageId(index: number, message: Message): number | string {\r\n    return message.id || `${message.sender.id}-${message.timestamp.getTime()}`;\r\n  }\r\n\r\n  // Group functionality methods\r\n  switchToUsersTab(): void {\r\n    this.activeTab = 'users';\r\n    this.selectedGroup = null;\r\n  }\r\n\r\n  switchToGroupsTab(): void {\r\n    this.activeTab = 'groups';\r\n    this.selectedUser = null;\r\n  }\r\n\r\n  onCreateGroupClick(): void {\r\n    this.showGroupCreate = true;\r\n  }\r\n\r\n  onGroupCreated(group: Group): void {\r\n    this.showGroupCreate = false;\r\n    this.groups.push(group);\r\n    this.onGroupSelected(group);\r\n  }\r\n\r\n  onGroupCreateCancelled(): void {\r\n    this.showGroupCreate = false;\r\n  }\r\n\r\n  getCurrentConversationName(): string {\r\n    if (this.selectedGroup) {\r\n      return this.selectedGroup.name;\r\n    }\r\n    if (this.selectedUser) {\r\n      return this.selectedUser.username;\r\n    }\r\n    return 'Select a conversation';\r\n  }\r\n\r\n  isGroupConversation(): boolean {\r\n    return !!this.selectedGroup;\r\n  }\r\n\r\n  canSendMessage(): boolean {\r\n    return !!(this.selectedUser || this.selectedGroup);\r\n  }\r\n}","<div class=\"container-fluid chat-container\">\r\n  <!-- Navigation Bar -->\r\n  <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary\">\r\n    <div class=\"container-fluid\">\r\n      <a class=\"navbar-brand\" href=\"#\">\r\n        <i class=\"fas fa-comments me-2\"></i>\r\n        Real-Time Chat\r\n      </a>\r\n      <div class=\"navbar-nav ms-auto d-flex align-items-center\">\r\n        <!-- Connection Status -->\r\n        <div class=\"connection-indicator me-3\">\r\n          <i [class]=\"connectionStatus ? 'fas fa-circle text-success' : 'fas fa-circle text-danger'\"></i>\r\n          <small [class]=\"getConnectionStatusClass()\">{{ getConnectionStatusText() }}</small>\r\n        </div>\r\n        \r\n        <!-- User Info -->\r\n        <span class=\"navbar-text me-3\">\r\n          <i class=\"fas fa-user me-1\"></i>\r\n          Welcome, {{ currentUser?.username }}!\r\n        </span>\r\n        \r\n        <!-- Logout Button -->\r\n        <button class=\"btn btn-outline-light btn-sm\" (click)=\"logout()\">\r\n          <i class=\"fas fa-sign-out-alt me-1\"></i>Logout\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n\r\n  <div class=\"row g-0 main-content\">\r\n    <!-- Sidebar -->\r\n    <div class=\"col-md-3 sidebar\">\r\n      <!-- Tab Navigation -->\r\n      <div class=\"sidebar-tabs\">\r\n        <button \r\n          class=\"tab-button\"\r\n          [class.active]=\"activeTab === 'users'\"\r\n          (click)=\"switchToUsersTab()\">\r\n          <i class=\"fas fa-user me-2\"></i>Users\r\n        </button>\r\n        <button \r\n          class=\"tab-button\"\r\n          [class.active]=\"activeTab === 'groups'\"\r\n          (click)=\"switchToGroupsTab()\">\r\n          <i class=\"fas fa-users me-2\"></i>Groups\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Users Tab -->\r\n      <div *ngIf=\"activeTab === 'users'\" class=\"tab-content\">\r\n        <app-user-list\r\n          [users]=\"users\"\r\n          [selectedUser]=\"selectedUser\"\r\n          [currentUser]=\"currentUser\"\r\n          (userSelected)=\"onUserSelected($event)\">\r\n        </app-user-list>\r\n      </div>\r\n\r\n      <!-- Groups Tab -->\r\n      <div *ngIf=\"activeTab === 'groups'\" class=\"tab-content\">\r\n        <app-group-list\r\n          [showMyGroups]=\"true\"\r\n          [showAllGroups]=\"false\"\r\n          (groupSelected)=\"onGroupSelected($event)\"\r\n          (createGroupClicked)=\"onCreateGroupClick()\">\r\n        </app-group-list>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Chat Area -->\r\n    <div class=\"col-md-9 chat-area\">\r\n      <!-- Chat Header -->\r\n      <div class=\"chat-header\" *ngIf=\"selectedUser || selectedGroup\">\r\n        <div class=\"d-flex align-items-center justify-content-between\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <!-- User Avatar -->\r\n            <div *ngIf=\"selectedUser\" class=\"user-avatar me-3\">\r\n              <div class=\"avatar-circle\" [class.online]=\"isOnline(selectedUser)\">\r\n                {{ selectedUser.username.charAt(0).toUpperCase() }}\r\n                <div class=\"status-indicator\" [class.online]=\"isOnline(selectedUser)\"></div>\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- Group Avatar -->\r\n            <div *ngIf=\"selectedGroup\" class=\"group-avatar me-3\">\r\n              <div class=\"avatar-circle group\">\r\n                <i class=\"fas fa-users\"></i>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <h6 class=\"mb-0\">{{ getCurrentConversationName() }}</h6>\r\n              <small class=\"text-muted\">\r\n                <i *ngIf=\"selectedUser\" class=\"fas fa-circle me-1\" [class.text-success]=\"isOnline(selectedUser)\" [class.text-secondary]=\"!isOnline(selectedUser)\"></i>\r\n                <span *ngIf=\"selectedUser\">{{ isOnline(selectedUser) ? 'Online' : 'Offline' }}</span>\r\n                <span *ngIf=\"selectedGroup\">\r\n                  <i class=\"fas fa-users me-1\"></i>\r\n                  {{ selectedGroup.memberCount }} member{{ selectedGroup.memberCount !== 1 ? 's' : '' }}\r\n                </span>\r\n              </small>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- Chat Actions -->\r\n          <div class=\"chat-actions\">\r\n            <button class=\"btn btn-sm btn-outline-secondary me-2\" title=\"Refresh messages\">\r\n              <i class=\"fas fa-sync-alt\"></i>\r\n            </button>\r\n            <button *ngIf=\"selectedGroup\" class=\"btn btn-sm btn-outline-secondary me-2\" title=\"Group info\">\r\n              <i class=\"fas fa-info-circle\"></i>\r\n            </button>\r\n            <button class=\"btn btn-sm btn-outline-secondary\" title=\"Clear chat\">\r\n              <i class=\"fas fa-trash\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Welcome Message -->\r\n      <div *ngIf=\"!selectedUser && !selectedGroup\" class=\"welcome-area\">\r\n        <div class=\"text-center text-muted\">\r\n          <i class=\"fas fa-comments fa-4x mb-4 text-primary\"></i>\r\n          <h3>Welcome to Real-Time Chat!</h3>\r\n          <p class=\"lead\">Select a user or group from the sidebar to start chatting</p>\r\n          <div class=\"mt-4\">\r\n            <div class=\"d-flex justify-content-center align-items-center\">\r\n              <i [class]=\"connectionStatus ? 'fas fa-wifi text-success' : 'fas fa-wifi-slash text-danger'\"></i>\r\n              <span class=\"ms-2\" [class]=\"getConnectionStatusClass()\">\r\n                {{ getConnectionStatusText() }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Messages Area -->\r\n      <div *ngIf=\"selectedUser || selectedGroup\" class=\"message-area\" #messageArea>\r\n        <!-- Loading State -->\r\n        <div *ngIf=\"loading\" class=\"loading-state\">\r\n          <div class=\"spinner-border text-primary\" role=\"status\">\r\n            <span class=\"visually-hidden\">Loading messages...</span>\r\n          </div>\r\n          <p class=\"mt-2 text-muted\">Loading conversation...</p>\r\n        </div>\r\n\r\n        <!-- Messages -->\r\n        <div *ngIf=\"!loading\" class=\"messages-container\">\r\n          <app-message\r\n            *ngFor=\"let message of messages; trackBy: trackByMessageId\"\r\n            [message]=\"message\"\r\n            [currentUser]=\"currentUser!\"\r\n            [isGroupChat]=\"isGroupConversation()\">\r\n          </app-message>\r\n\r\n          <!-- Empty State -->\r\n          <div *ngIf=\"messages.length === 0\" class=\"empty-messages\">\r\n            <div class=\"text-center text-muted\">\r\n              <i class=\"fas fa-comment-dots fa-2x mb-3\"></i>\r\n              <p>No messages yet. Start the conversation!</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Typing Indicator -->\r\n        <div *ngIf=\"isTyping\" class=\"typing-indicator\">\r\n          <div class=\"typing-dots\">\r\n            <span></span>\r\n            <span></span>\r\n            <span></span>\r\n          </div>\r\n          <small class=\"text-muted ms-2\">You are typing...</small>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Message Input -->\r\n      <div *ngIf=\"canSendMessage()\" class=\"message-input\">\r\n        <div class=\"input-group\">\r\n          <input \r\n            type=\"text\" \r\n            class=\"form-control\" \r\n            [(ngModel)]=\"newMessage\"\r\n            (input)=\"onMessageInput()\"\r\n            (keypress)=\"onKeyPress($event)\"\r\n            [placeholder]=\"selectedGroup ? 'Type a message to ' + selectedGroup.name + '...' : 'Type your message...'\"\r\n            [disabled]=\"!canSendMessage() || !connectionStatus\"\r\n            maxlength=\"1000\">\r\n          <button \r\n            class=\"btn btn-primary\" \r\n            type=\"button\" \r\n            (click)=\"sendMessage()\"\r\n            [disabled]=\"!newMessage.trim() || !canSendMessage() || !connectionStatus\"\r\n            title=\"Send message\">\r\n            <i class=\"fas fa-paper-plane\"></i>\r\n          </button>\r\n        </div>\r\n        \r\n        <!-- Character Counter -->\r\n        <div class=\"character-counter\" *ngIf=\"newMessage.length > 800\">\r\n          <small class=\"text-muted\">{{ newMessage.length }}/1000</small>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Group Create Modal -->\r\n  <app-group-create\r\n    *ngIf=\"showGroupCreate\"\r\n    (groupCreated)=\"onGroupCreated($event)\"\r\n    (cancelled)=\"onGroupCreateCancelled()\">\r\n  </app-group-create>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}